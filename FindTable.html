<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <title>ผังโต้ะจีน - Ice &amp; Jumm</title>
    <meta
      name="description"
      content="ค้นหาโต้ะของคุณในงานแต่งงาน Ice & Jumm"
    />

    <!-- Tailwind via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Font for serif headings (Playfair Display) -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Inline theme tokens + helper utility classes to mimic your Tailwind theme -->
    <style>
      :root {
        /* Wedding Theme Colors (from your globals.css) */
        --wedding-cream: oklch(0.97 0.01 85);
        --wedding-sage: oklch(0.65 0.04 145);
        --wedding-forest: oklch(0.35 0.05 150);
        --wedding-blush: oklch(0.85 0.05 25);

        /* Base Colors (from your globals.css) */
        --background: oklch(0.99 0.005 85);
        --foreground: oklch(0.35 0.05 150);
        --border: oklch(0.88 0.02 145);
      }

      /* Make Tailwind's font-serif actually be Playfair like your app */
      .font-serif {
        font-family: "Playfair Display", serif;
      }

      /* Color helper classes to emulate your custom tokens */
      .text-wedding-forest {
        color: var(--wedding-forest);
      }
      .text-wedding-sage {
        color: var(--wedding-sage);
      }
      .bg-wedding-cream {
        background-color: var(--wedding-cream);
      }
      .bg-wedding-cream-95 {
        background-color: color-mix(
          in oklab,
          var(--wedding-cream) 95%,
          transparent
        );
      }
      .bg-wedding-sage-20 {
        background-color: color-mix(
          in oklab,
          var(--wedding-sage) 20%,
          transparent
        );
      }
      .border-wedding-sage-20 {
        border-color: color-mix(in oklab, var(--wedding-sage) 20%, transparent);
      }

      /* Base background/foreground */
      body {
        background: var(--background);
        color: var(--foreground);
      }

      /* Fallback for browsers without color-mix: */
      @supports not (background: color-mix(in oklab, red 50%, white)) {
        .bg-wedding-cream-95 {
          background-color: rgba(247, 246, 242, 0.95);
        }
        .bg-wedding-sage-20 {
          background-color: rgba(100, 133, 117, 0.2);
        }
        .border-wedding-sage-20 {
          border-color: rgba(100, 133, 117, 0.2);
        }
      }

      /* Nice select caret */
      select {
        background-image: linear-gradient(45deg, transparent 50%, #6b7280 50%),
          linear-gradient(135deg, #6b7280 50%, transparent 50%),
          linear-gradient(to right, #d1d5db, #d1d5db);
        background-position: calc(100% - 18px) calc(1em + 2px),
          calc(100% - 13px) calc(1em + 2px), calc(100% - 2.5rem) 0.5rem;
        background-size: 5px 5px, 5px 5px, 1px 1.5rem;
        background-repeat: no-repeat;
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
      }

      /* Subtle glass effect on the form card */
      .glass {
        backdrop-filter: blur(6px);
        -webkit-backdrop-filter: blur(6px);
      }
    </style>
  </head>

  <body class="antialiased">
    <!-- Background image + gradient overlay -->
    <div class="min-h-screen relative overflow-hidden">
      <div
        id="bg"
        class="absolute inset-0 bg-cover bg-center bg-no-repeat"
      ></div>

      <!-- Gradient overlay: left opaque -> right transparent -->
      <div
        class="absolute inset-0"
        id="overlay"
        style="
          background:
            linear-gradient(
              to right,
              color-mix(in oklab, var(--background) 95%, transparent) 0%,
              color-mix(in oklab, var(--background) 80%, transparent) 35%,
              color-mix(in oklab, var(--background) 60%, transparent) 60%,
              transparent 100%
            );
        "
      ></div>

      <!-- Content -->
      <main class="relative z-10 min-h-screen flex items-center">
        <div class="container px-4 md:px-8 lg:px-12">
          <div class="max-w-md lg:max-w-lg">
            <!-- Heading -->
            <header class="mb-8 md:mb-12">
              <h1
                class="font-serif text-4xl md:text-5xl lg:text-6xl text-balance mb-3 text-wedding-forest"
              >
                ผังโต้ะจีน
              </h1>
              <p class="text-lg md:text-xl text-wedding-sage leading-relaxed">
                Ice &amp; Jumm
              </p>
            </header>

            <!-- Card -->
            <section
              id="card"
              class="bg-wedding-cream-95 glass rounded-2xl p-6 md:p-8 shadow-2xl border border-wedding-sage-20"
            >
              <!-- Search Form -->
              <div id="form-view" class="space-y-6">
                <!-- ฝั่ง -->
                <div class="space-y-2">
                  <label
                    for="side"
                    class="block text-base md:text-lg font-medium text-wedding-forest"
                    >แขกฝั่ง</label
                  >
                  <select
                    id="side"
                    class="w-full bg-white border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[color:oklch(0.65_0.04_145)] rounded-lg px-4 py-3 text-[16px] text-wedding-forest"
                  >
                    <option value="" selected>เลือกฝั่ง</option>
                    <option value="เจ้าสาว">เจ้าสาว</option>
                    <option value="เจ้าบ่าว">เจ้าบ่าว</option>
                  </select>
                </div>

                <!-- ความสัมพันธ์ -->
                <div class="space-y-2">
                  <label
                    for="relationship"
                    class="block text-base md:text-lg font-medium text-wedding-forest"
                    >ความสัมพันธ์</label
                  >
                  <select
                    id="relationship"
                    class="w-full bg-white border border-gray-300 rounded-lg px-4 py-3 text-[16px] text-wedding-forest disabled:opacity-50"
                    disabled
                  >
                    <option value="">
                      กรุณาเลือกฝั่งก่อน
                    </option>
                  </select>
                </div>

                <!-- ขยายความ 1 -->
                <div id="detail1-wrap" class="space-y-2 hidden">
                  <label
                    for="detail1"
                    class="block text-base md:text-lg font-medium text-wedding-forest"
                    >ขยายความ 1</label
                  >
                  <select
                    id="detail1"
                    class="w-full bg-white border border-gray-300 rounded-lg px-4 py-3 text-[16px] text-wedding-forest disabled:opacity-50"
                    disabled
                  >
                    <option value="">
                      กรุณาเลือกความสัมพันธ์ก่อน
                    </option>
                  </select>
                </div>

                <!-- ขยายความ 2 -->
                <div id="detail2-wrap" class="space-y-2 hidden">
                  <label
                    for="detail2"
                    class="block text-base md:text-lg font-medium text-wedding-forest"
                    >ขยายความ 2</label
                  >
                  <select
                    id="detail2"
                    class="w-full bg-white border border-gray-300 rounded-lg px-4 py-3 text-[16px] text-wedding-forest disabled:opacity-50"
                    disabled
                  >
                    <option value="">
                      กรุณาเลือกขยายความ 1 ก่อน
                    </option>
                  </select>
                </div>

                <!-- รายชื่อ -->
                <div class="space-y-2">
                  <label
                    for="guest"
                    class="block text-base md:text-lg font-medium text-wedding-forest"
                    >รายชื่อและผู้ติดตาม</label
                  >
                  <select
                    id="guest"
                    class="w-full bg-white border border-gray-300 rounded-lg px-4 py-3 text-[16px] text-wedding-forest disabled:opacity-50"
                    disabled
                  >
                    <option value="">
                      กรุณาเลือกความสัมพันธ์ก่อน
                    </option>
                  </select>
                </div>

                <!-- Action -->
                <button
                  id="searchBtn"
                  class="w-full bg-[color:oklch(0.35_0.05_150)] hover:opacity-90 text-[color:oklch(0.97_0.01_85)] text-base md:text-lg py-4 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                  disabled
                >
                  ค้นหาโต้ะ
                </button>
              </div>

              <!-- Result View -->
              <div id="result-view" class="space-y-6 text-center hidden">
                <div class="space-y-4">
                  <div
                    class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-wedding-sage-20 mb-2"
                  >
                    <span class="text-3xl">✓</span>
                  </div>
                  <h2
                    class="font-serif text-2xl md:text-3xl text-wedding-forest"
                  >
                    พบข้อมูลของคุณแล้ว!
                  </h2>
                </div>

                <div class="space-y-4 py-6">
                  <div
                    class="bg-white/60 rounded-xl p-6 border border-wedding-sage-20"
                  >
                    <p class="text-sm text-wedding-sage mb-2">จำนวนแขก</p>
                    <p
                      id="result-guestCount"
                      class="text-4xl md:text-5xl font-serif text-wedding-forest"
                    >
                      –
                    </p>
                  </div>
                  <div
                    class="bg-white/60 rounded-xl p-6 border border-wedding-sage-20"
                  >
                    <p class="text-sm text-wedding-sage mb-2">เบอร์โต้ะ</p>
                    <p
                      id="result-tableNumber"
                      class="text-4xl md:text-5xl font-serif text-wedding-forest"
                    >
                      –
                    </p>
                  </div>
                </div>

                <button
                  id="resetBtn"
                  class="w-full border border-wedding-sage-20 text-wedding-forest hover:bg-black/5 text-base py-4 rounded-xl bg-transparent"
                >
                  ค้นหาอีกครั้ง
                </button>
              </div>
            </section>
          </div>
        </div>
      </main>
    </div>

    <script>
      // === CONFIG ===
      const BACKGROUND_URL =
        "https://hebbkx1anhila5yf.public.blob.vercel-storage.com/TableLayout-n8KYXBtDLSI4j0lnCSUPnPWUbgKstp.png";

      // === DATA (embedded from your guest-data.ts) ===
      /**
       * @typedef {Object} Guest
       * @property {string} side
       * @property {string} relationship
       * @property {string} detail1
       * @property {string} detail2
       * @property {string} tableGroup
       * @property {string} name
       * @property {number} guestCount
       * @property {number} tableNumber
       */

      /** @type {Guest[]} */
      const guestData = [
        {
          side: "เจ้าสาว",
          relationship: "SEPO - MOF",
          detail1: "น้องๆ Bridesmates <3",
          tableGroup: "Mix Master + Bridesmates",
          name: "ชัญญา สาทิตานนท์(เฟ) Bridesmates",
          guestCount: 1,
          tableNumber: 1,
        },
        {
          side: "เจ้าสาว",
          relationship: "SEPO - MOF",
          detail1: "น้องๆ Bridesmates <3",
          tableGroup: "Mix Master + Bridesmates",
          name: "กฤชอร ปองเสงี่ยม (มู่หลาน) Bridesmates",
          guestCount: 1,
          tableNumber: 1,
        },
        {
          side: "เจ้าสาว",
          relationship: "SEPO - MOF",
          detail1: "น้องๆ Bridesmates <3",
          tableGroup: "Mix Master + Bridesmates",
          name: "กมลวรรณ เจริญเรืองทรัพย์ (ต้นหลิว) Bridesmates",
          guestCount: 1,
          tableNumber: 1,
        },
        {
          side: "เจ้าสาว",
          relationship: "SEPO - MOF",
          detail1: "น้องๆ Bridesmates <3",
          tableGroup: "Mix Master + Bridesmates",
          name: "นางสาวสุชัญญา ศรีวารี (ใบพลู) Bridesmates",
          guestCount: 1,
          tableNumber: 1,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่เรียน",
          detail2: "Master - CityU",
          tableGroup: "Mix Master + Bridesmates",
          name: "พดน ชินพิพัฒน์ (บูม) CityU",
          guestCount: 1,
          tableNumber: 9,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่เรียน",
          detail2: "Master - CityU",
          tableGroup: "Mix Master + Bridesmates",
          name: "วรวัชร สุขเกื้อ (Bolt) CityU",
          guestCount: 2,
          tableNumber: 9,
        },
        {
          side: "เจ้าสาว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่เรียน",
          detail2: "Master - Reading",
          tableGroup: "Mix Master + Bridesmates",
          name: "ป่าน+แตงกวา　Reading",
          guestCount: 2,
          tableNumber: 9,
        },
        {
          side: "เจ้าสาว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Ice Mom Relative　１",
          name: "ตั่วกู๋และภรรยา - ญาติแม่เจ้าสาว",
          guestCount: 2,
          tableNumber: 2,
        },
        {
          side: "เจ้าสาว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Ice Mom Relative　１",
          name: "พี่ติ้กและสามี - ญาติแม่เจ้าสาว",
          guestCount: 4,
          tableNumber: 2,
        },
        {
          side: "เจ้าสาว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Ice Mom Relative　１",
          name: "พี่ตั้กและสามี - ญาติแม่เจ้าสาว",
          guestCount: 4,
          tableNumber: 2,
        },
        {
          side: "เจ้าสาว",
          relationship: "SEPO - MOF",
          detail1: "พี่ สนผ.",
          tableGroup: "Ice SEPO (VIP)",
          name: "พี่ดราฟ SEPO",
          guestCount: 1,
          tableNumber: 9,
        },
        {
          side: "เจ้าสาว",
          relationship: "SEPO - MOF",
          detail1: "พี่ สนผ.",
          tableGroup: "Ice SEPO (VIP)",
          name: "พี่หนึ่ง SEPO",
          guestCount: 1,
          tableNumber: 9,
        },
        {
          side: "เจ้าสาว",
          relationship: "SEPO - MOF",
          detail1: "พี่ สนผ.",
          tableGroup: "Ice SEPO (VIP)",
          name: "พี่บิ๊ก ผอ.สนผ. SEPO",
          guestCount: 1,
          tableNumber: 3,
        },
        {
          side: "เจ้าสาว",
          relationship: "SEPO - MOF",
          detail1: "พี่ สนผ.",
          tableGroup: "Ice SEPO (VIP)",
          name: "พี่กุ้ง ผู้เชี่ยวชาญ SEPO",
          guestCount: 1,
          tableNumber: 3,
        },
        {
          side: "เจ้าสาว",
          relationship: "SEPO - MOF",
          detail1: "พี่ สนผ.",
          tableGroup: "Ice SEPO (VIP)",
          name: "พี่ปุ๊ก ที่ปรึกษาด้านพัฒนารัฐวิสาหกิจ SEPO",
          guestCount: 1,
          tableNumber: 3,
        },
        {
          side: "เจ้าสาว",
          relationship: "SEPO - MOF",
          detail1: "พี่ สนผ.",
          tableGroup: "Ice SEPO (VIP)",
          name: "พี่นก C8 SEPO",
          guestCount: 1,
          tableNumber: 3,
        },
        {
          side: "เจ้าสาว",
          relationship: "SEPO - MOF",
          detail1: "พี่ สนผ.",
          tableGroup: "Ice SEPO (VIP)",
          name: "พี่โย C8 SEPO",
          guestCount: 1,
          tableNumber: 3,
        },
        {
          side: "เจ้าสาว",
          relationship: "SEPO - MOF",
          detail1: "พี่ สนผ.",
          tableGroup: "Ice SEPO (VIP)",
          name: "พี่ผึ้ง C8 หัวหน้าเจ้าสาว SEPO",
          guestCount: 1,
          tableNumber: 3,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนพ่อ เพื่อนแม่บ่าวสาว",
          detail1: "เพื่อนๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Ice SEPO (VIP)",
          name: "คุณ ฉัตรชัย ศิริไล ธ.ก.ส.",
          guestCount: 1,
          tableNumber: 3,
        },
        {
          side: "เจ้าสาว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่เรียน",
          detail2: "Bachelor - Kaset",
          tableGroup: "Ice KU",
          name: "อีฟ KU",
          guestCount: 2,
          tableNumber: 4,
        },
        {
          side: "เจ้าสาว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่เรียน",
          detail2: "Bachelor - Kaset",
          tableGroup: "Ice KU",
          name: "พัชราภรณ์  พิมพ์สุวรรณ์ (ปุ๋มปิ๋ม) KU",
          guestCount: 2,
          tableNumber: 4,
        },
        {
          side: "เจ้าสาว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่เรียน",
          detail2: "Bachelor - Kaset",
          tableGroup: "Ice KU",
          name: "ปาณิศา ณรงค์ราช (มายด์) KU",
          guestCount: 2,
          tableNumber: 4,
        },
        {
          side: "เจ้าสาว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่เรียน",
          detail2: "Bachelor - Kaset",
          tableGroup: "Ice KU",
          name: "หมูเล้ก KU",
          guestCount: 1,
          tableNumber: 4,
        },
        {
          side: "เจ้าสาว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่เรียน",
          detail2: "Bachelor - Kaset",
          tableGroup: "Ice KU",
          name: "ฝ้าย  KU",
          guestCount: 1,
          tableNumber: 4,
        },
        {
          side: "เจ้าสาว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่เรียน",
          detail2: "Bachelor - Kaset",
          tableGroup: "Ice KU",
          name: "แตงกวา KU",
          guestCount: 1,
          tableNumber: 4,
        },
        {
          side: "เจ้าสาว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Ice Mom Relative　２",
          name: "พี่ตั้มและแฟน - ญาติแม่เจ้าสาว",
          guestCount: 2,
          tableNumber: 5,
        },
        {
          side: "เจ้าสาว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Ice Mom Relative　２",
          name: "โซยอี้ - ญาติแม่เจ้าสาว",
          guestCount: 2,
          tableNumber: 5,
        },
        {
          side: "เจ้าสาว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Ice Mom Relative　２",
          name: "หยี่อี้ - ญาติแม่เจ้าสาว",
          guestCount: 2,
          tableNumber: 5,
        },
        {
          side: "เจ้าสาว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Ice Mom Relative　２",
          name: "เฟิน เมทินี เตชะอภัยคุณ ( เฟิน ) - ญาติแม่เจ้าสาว",
          guestCount: 3,
          tableNumber: 1,
        },
        {
          side: "เจ้าสาว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งพ่อ",
          detail2: "",
          tableGroup: "Ice Dad Relative ＋Fam",
          name: "ซาโกว - ญาติพ่อเจ้าสาว",
          guestCount: 1,
          tableNumber: 6,
        },
        {
          side: "เจ้าสาว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งพ่อ",
          detail2: "",
          tableGroup: "Ice Dad Relative ＋Fam",
          name: "โกนี - ญาติพ่อเจ้าสาว",
          guestCount: 1,
          tableNumber: 6,
        },
        {
          side: "เจ้าสาว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งพ่อ",
          detail2: "",
          tableGroup: "Ice Dad Relative ＋Fam",
          name: "โกแมว - ญาติพ่อเจ้าสาว",
          guestCount: 1,
          tableNumber: 6,
        },
        {
          side: "เจ้าสาว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งพ่อ",
          detail2: "",
          tableGroup: "Ice Dad Relative ＋Fam",
          name: "น้องหลิว - ญาติพ่อเจ้าสาว",
          guestCount: 1,
          tableNumber: 6,
        },
        {
          side: "เจ้าสาว",
          relationship: "ครอบครัวบ่าวสาว",
          detail1: "",
          detail2: "",
          tableGroup: "Ice Dad Relative ＋Fam",
          name: "ครอบครัวเจ้าสาว",
          guestCount: 4,
          tableNumber: 6,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Jumm Mom Relative 1",
          name: "สมพจน์ (เหว่งซก) และครอบครัว - ญาติแม่เจ้าบ่าว",
          guestCount: 2,
          tableNumber: 13,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Jumm Mom Relative 1",
          name: "ธนพร พงศ์พิศิษฎ์สกุล (หงี่กู) - ญาติแม่เจ้าบ่าว",
          guestCount: 1,
          tableNumber: 13,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Jumm Mom Relative 1",
          name: "วาศิณี พงศ์พิศิษฎ์สกุล (อี๊ส้ม) - ญาติแม่เจ้าบ่าว",
          guestCount: 1,
          tableNumber: 13,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Jumm Mom Relative 1",
          name: "นวรัตน์ พงศ์พิศิษฎ์สกุล (รัตน์, หม่าม้า) - ญาติแม่เจ้าบ่าว",
          guestCount: 2,
          tableNumber: 13,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Jumm Mom Relative 1",
          name: "นภาพร แก่นเพิ่ม ( พี่กุ้ง และครอบครัว ) - ญาติแม่เจ้าบ่าว",
          guestCount: 4,
          tableNumber: 13,
        },
        {
          side: "เจ้าสาว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Mix Close Fam",
          name: "โซ้ยกู๋ - ญาติแม่เจ้าสาว",
          guestCount: 2,
          tableNumber: 8,
        },
        {
          side: "เจ้าสาว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Mix Close Fam",
          name: "ฐิติภูมิ เตชะอภัยคุณ (นิว) - ญาติแม่เจ้าสาว",
          guestCount: 1,
          tableNumber: 8,
        },
        {
          side: "เจ้าสาว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Mix Close Fam",
          name: "คงกฤษ เตชะอภัยคุณ (แม็ก) - ญาติแม่เจ้าสาว",
          guestCount: 1,
          tableNumber: 8,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Mix Close Fam",
          name: "M - ญาติแม่เจ้าบ่าว",
          guestCount: 2,
          tableNumber: 8,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Mix Close Fam",
          name: "ภาวิณี นภาพงษ์จันทรา (หลิ่นตี๊)  - ญาติแม่เจ้าบ่าว",
          guestCount: 2,
          tableNumber: 8,
        },
        {
          side: "เจ้าสาว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่เรียน",
          detail2: "Master - Reading",
          tableGroup: "Mix Close Fam",
          name: "เจ้แอม+สามี Reading",
          guestCount: 2,
          tableNumber: 9,
        },
        {
          side: "เจ้าสาว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Mix Parent Friend & Fam",
          name: "ยี่กู๋ (กรียาพัตร์  เตชะอภัยคุณ  (น้อย)) - ญาติแม่เจ้าสาว",
          guestCount: 3,
          tableNumber: 1,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Mix Parent Friend & Fam",
          name: "ชัยวัต + ครอบครัว หาดใหญ่  - ญาติแม่เจ้าบ่าว",
          guestCount: 2,
          tableNumber: 8,
        },
        {
          side: "เจ้าสาว",
          relationship: "เพื่อนพ่อ เพื่อนแม่บ่าวสาว",
          detail1: "เพื่อนๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Mix Parent Friend & Fam",
          name: "น้าวิ - เพื่อนแม่เจ้าสาว",
          guestCount: 1,
          tableNumber: 5,
        },
        {
          side: "เจ้าสาว",
          relationship: "เพื่อนพ่อ เพื่อนแม่บ่าวสาว",
          detail1: "เพื่อนๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Mix Parent Friend & Fam",
          name: "มาริสา กรุณานนท์  - เพื่อนแม่เจ้าสาว",
          guestCount: 1,
          tableNumber: 5,
        },
        {
          side: "เจ้าสาว",
          relationship: "เพื่อนพ่อ เพื่อนแม่บ่าวสาว",
          detail1: "เพื่อนๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Mix Parent Friend & Fam",
          name: "น้ากบ  - เพื่อนแม่เจ้าสาว",
          guestCount: 1,
          tableNumber: 5,
        },
        {
          side: "เจ้าสาว",
          relationship: "เพื่อนพ่อ เพื่อนแม่บ่าวสาว",
          detail1: "เพื่อนๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "Mix Parent Friend & Fam",
          name: "น้าฝน - เพื่อนแม่เจ้าสาว",
          guestCount: 1,
          tableNumber: 5,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งพ่อ",
          detail2: "",
          tableGroup: "Jumm Dad Relative　１",
          name: "วิวัฒน์ ปองเสงี่ยม - ญาติพ่อเจ้าบ่าว",
          guestCount: 3,
          tableNumber: 10,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งพ่อ",
          detail2: "",
          tableGroup: "Jumm Dad Relative　１",
          name: "โกวเล็ก (รถเข็น  1 ท่าน)  - ญาติพ่อเจ้าบ่าว",
          guestCount: 4,
          tableNumber: 7,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "ครอบครัวบ่าวสาว",
          detail1: "",
          detail2: "",
          tableGroup: "Jumm Dad Relative　１",
          name: "แจน พี่สาวจ้ำ - พี่น้องเจ้าบ่าว",
          guestCount: 2,
          tableNumber: 10,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่เรียน",
          detail2: "Bachelor - SIIT",
          tableGroup: "Jumm SIIT",
          name: "Gorn SIIT",
          guestCount: 2,
          tableNumber: 11,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่เรียน",
          detail2: "Bachelor - SIIT",
          tableGroup: "Jumm SIIT",
          name: "โจ๋สุดหล่อ　SIIT",
          guestCount: 2,
          tableNumber: 11,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่เรียน",
          detail2: "Bachelor - SIIT",
          tableGroup: "Jumm SIIT",
          name: "เตชนิธิ SIIT",
          guestCount: 2,
          tableNumber: 11,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่เรียน",
          detail2: "Bachelor - SIIT",
          tableGroup: "Jumm SIIT",
          name: "ภูวิช แอน　SIIT",
          guestCount: 2,
          tableNumber: 11,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่เรียน",
          detail2: "Bachelor - SIIT",
          tableGroup: "Jumm SIIT",
          name: "อิทธิพัทธ์ คำพา (เต้ย)　SIIT",
          guestCount: 2,
          tableNumber: 11,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่เรียน",
          detail2: "Bachelor - SIIT",
          tableGroup: "Jumm SIIT 2",
          name: "พลอานันต์  จองลิขิต  (นีโน่) SIIT",
          guestCount: 1,
          tableNumber: 12,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่เรียน",
          detail2: "Bachelor - SIIT",
          tableGroup: "Jumm SIIT 2",
          name: "อาร์ท SIIT",
          guestCount: 1,
          tableNumber: 12,
        },
        {
          side: "เจ้าสาว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่เรียน",
          detail2: "High School - SJB",
          tableGroup: "Jumm SIIT 2",
          name: "แอลลี่ SJB",
          guestCount: 1,
          tableNumber: 12,
        },
        {
          side: "เจ้าสาว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่ทำงาน",
          detail2: "FWD",
          tableGroup: "Jumm SIIT 2",
          name: "ณัฐพร ลิ้มตระกูลชัย (แนน) FWD",
          guestCount: 1,
          tableNumber: 12,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่เรียน",
          detail2: "Bachelor - SIIT",
          tableGroup: "Jumm SIIT 2",
          name: "Oil ออย SIIT",
          guestCount: 2,
          tableNumber: 12,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่เรียน",
          detail2: "Bachelor - SIIT",
          tableGroup: "Jumm SIIT 2",
          name: "ชมพูนุท ปลื้มจิต -ชมพู่ SIIT",
          guestCount: 2,
          tableNumber: 12,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่เรียน",
          detail2: "Bachelor - SIIT",
          tableGroup: "Jumm SIIT 2",
          name: "วุ้น SIIT",
          guestCount: 2,
          tableNumber: 12,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "ครอบครัวบ่าวสาว",
          detail1: "",
          detail2: "",
          tableGroup: "JummParent Friend Mix",
          name: "ไลวรรณ ปองเสงี่ยม (พ่อ + แม่) - พ่อแม่เจ้าบ่าว",
          guestCount: 2,
          tableNumber: 6,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนพ่อ เพื่อนแม่บ่าวสาว",
          detail1: "เพื่อนๆ ฝั่งพ่อ",
          detail2: "",
          tableGroup: "JummParent Friend Mix",
          name: "นาย สุวิทย์ ขจรเดชากุล - เพื่อนพ่อเจ้าบ่าว",
          guestCount: 1,
          tableNumber: 14,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนพ่อ เพื่อนแม่บ่าวสาว",
          detail1: "เพื่อนๆ ฝั่งพ่อ",
          detail2: "",
          tableGroup: "JummParent Friend Mix",
          name: "พรชัย ปิ่นทอง - เพื่อนพ่อเจ้าบ่าว",
          guestCount: 1,
          tableNumber: 14,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนพ่อ เพื่อนแม่บ่าวสาว",
          detail1: "เพื่อนๆ ฝั่งพ่อ",
          detail2: "",
          tableGroup: "JummParent Friend Mix",
          name: "พล.อ.โกญจนาท ศุกระเศรณี - เพื่อนพ่อเจ้าบ่าว",
          guestCount: 1,
          tableNumber: 14,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนพ่อ เพื่อนแม่บ่าวสาว",
          detail1: "เพื่อนๆ ฝั่งพ่อ",
          detail2: "",
          tableGroup: "JummParent Friend Mix",
          name: "นายริทัศน์ ศรีทะวงศ์ - เพื่อนพ่อเจ้าบ่าว",
          guestCount: 2,
          tableNumber: 14,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนพ่อ เพื่อนแม่บ่าวสาว",
          detail1: "เพื่อนๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "JummParent Friend Mix",
          name: "พิษณุพร ขาวประเสริฐ - เพื่อนแม่เจ้าบ่าว",
          guestCount: 1,
          tableNumber: 3,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนพ่อ เพื่อนแม่บ่าวสาว",
          detail1: "เพื่อนๆ ฝั่งแม่",
          detail2: "",
          tableGroup: "JummParent Friend Mix",
          name: "อภิรัตน์ ตันติเวชกุบ (เอ๋) - เพื่อนแม่เจ้าบ่าว",
          guestCount: 2,
          tableNumber: 3,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งพ่อ",
          detail2: "",
          tableGroup: "Jumm Dad Relative　２",
          name: "ยุพดี ปองเสงี่ยม - ญาติพ่อเจ้าบ่าว",
          guestCount: 4,
          tableNumber: 10,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งพ่อ",
          detail2: "",
          tableGroup: "Jumm Dad Relative　２",
          name: "แปะฮ้วด - ญาติพ่อเจ้าบ่าว",
          guestCount: 2,
          tableNumber: 7,
        },
         {
          side: "เจ้าบ่าว",
          relationship: "Dextra Holding Services",
          name: "Marketing Dextra",
          guestCount: 5,
          tableNumber: 14,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "ญาติพี่น้อง",
          detail1: "ญาติๆ ฝั่งพ่อ",
          detail2: "",
          tableGroup: "Jumm Dad Relative　２",
          name: "พี่โจ้ ปองเสงี่ยม - ญาติพ่อเจ้าบ่าว",
          guestCount: 4,
          tableNumber: 7,
        },
        {
          side: "เจ้าสาว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่ทำงาน",
          detail2: "CPALL",
          tableGroup: "Mix　Work　IJ",
          name: "แตมป์ CPALL",
          guestCount: 1,
          tableNumber: 15,
        },
        {
          side: "เจ้าสาว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่ทำงาน",
          detail2: "CPALL",
          tableGroup: "Mix　Work　IJ",
          name: "โบ CPALL",
          guestCount: 1,
          tableNumber: 15,
        },
        {
          side: "เจ้าสาว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่ทำงาน",
          detail2: "CPALL",
          tableGroup: "Mix　Work　IJ",
          name: "เอิร์ท CPALL",
          guestCount: 1,
          tableNumber: 15,
        },
        {
          side: "เจ้าสาว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่ทำงาน",
          detail2: "CPALL",
          tableGroup: "Mix　Work　IJ",
          name: "วี่ CPALL",
          guestCount: 1,
          tableNumber: 15,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่ทำงาน",
          detail2: "Jaspal",
          tableGroup: "Mix　Work　IJ",
          name: "ชนก อำไพ  - เจ Jaspal",
          guestCount: 1,
          tableNumber: 15,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่ทำงาน",
          detail2: "Jaspal",
          tableGroup: "Mix　Work　IJ",
          name: "อธิป เก้าเด่น - ตั้ม Jaspal",
          guestCount: 1,
          tableNumber: 15,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่ทำงาน",
          detail2: "Jaspal",
          tableGroup: "Mix　Work　IJ",
          name: "Chokchai Thawatcharaporn - Bank Jaspal",
          guestCount: 2,
          tableNumber: 15,
        },
        {
          side: "เจ้าบ่าว",
          relationship: "เพื่อนบ่าวสาว",
          detail1: "จากที่ทำงาน",
          detail2: "Jaspal",
          tableGroup: "Mix　Work　IJ",
          name: "พิทักษ์สิน สมวงศ์(ต๊ะ) - พี่ต้ะ Jaspal",
          guestCount: 2,
          tableNumber: 15,
        },
      ];

      // === ELEMENTS ===
      const bgEl = document.getElementById("bg");
      const formView = document.getElementById("form-view");
      const resultView = document.getElementById("result-view");

      const sideEl = document.getElementById("side");
      const relEl = document.getElementById("relationship");
      const detail1Wrap = document.getElementById("detail1-wrap");
      const detail2Wrap = document.getElementById("detail2-wrap");
      const detail1El = document.getElementById("detail1");
      const detail2El = document.getElementById("detail2");
      const guestEl = document.getElementById("guest");
      const searchBtn = document.getElementById("searchBtn");
      const resetBtn = document.getElementById("resetBtn");

      const resGuestCount = document.getElementById("result-guestCount");
      const resTableNumber = document.getElementById("result-tableNumber");

      // === INIT BG ===
      bgEl.style.backgroundImage = `url('${BACKGROUND_URL}')`;

      // === HELPERS ===
      /**
       * Set options for a <select>
       * @param {HTMLSelectElement} select
       * @param {string[]} options
       * @param {string} placeholder
       */
      function setOptions(select, options, placeholder) {
        select.innerHTML = "";
        const ph = document.createElement("option");
        ph.value = "";
        ph.textContent = placeholder;
        ph.selected = true;
        select.appendChild(ph);

        options.forEach((opt) => {
          const o = document.createElement("option");
          o.value = opt;
          o.textContent = opt;
          select.appendChild(o);
        });
      }

      function uniqueSorted(arr) {
        return Array.from(new Set(arr)).sort((a, b) =>
          (a || "").localeCompare(b || "", "th")
        );
      }

      // === DYNAMIC OPTION BUILDERS ===
      function buildRelationships(side) {
        if (!side) return [];
        const rels = guestData
          .filter((g) => g.side === side)
          .map((g) => g.relationship);
        return uniqueSorted(rels);
      }

      function buildDetail1(side, relationship) {
        if (!side || !relationship) return [];
        const d1 = guestData
          .filter((g) => g.side === side && g.relationship === relationship)
          .map((g) => g.detail1)
          .filter((d) => d && d.trim() !== "");
        return uniqueSorted(d1);
      }

      function buildDetail2(side, relationship, detail1) {
        if (!side || !relationship || !detail1) return [];
        const d2 = guestData
          .filter(
            (g) =>
              g.side === side &&
              g.relationship === relationship &&
              g.detail1 === detail1
          )
          .map((g) => g.detail2)
          .filter((d) => d && d.trim() !== "");
        return uniqueSorted(d2);
      }

      function buildGuests(side, relationship, detail1, detail2) {
        if (!side || !relationship) return [];
        let filtered = guestData.filter(
          (g) => g.side === side && g.relationship === relationship
        );
        if (detail1) filtered = filtered.filter((g) => g.detail1 === detail1);
        if (detail2) filtered = filtered.filter((g) => g.detail2 === detail2);
        return uniqueSorted(filtered.map((g) => g.name));
      }

      // === STATE & EVENTS ===
      function resetAll() {
        sideEl.value = "";
        relEl.value = "";
        detail1El.value = "";
        detail2El.value = "";
        guestEl.value = "";

        relEl.disabled = true;
        detail1El.disabled = true;
        detail2El.disabled = true;
        guestEl.disabled = true;

        setOptions(relEl, [], "กรุณาเลือกฝั่งก่อน");
        setOptions(detail1El, [], "กรุณาเลือกความสัมพันธ์ก่อน");
        setOptions(detail2El, [], "กรุณาเลือกขยายความ 1 ก่อน");
        setOptions(guestEl, [], "กรุณาเลือกความสัมพันธ์ก่อน");

        detail1Wrap.classList.add("hidden");
        detail2Wrap.classList.add("hidden");

        searchBtn.disabled = true;

        resultView.classList.add("hidden");
        formView.classList.remove("hidden");
      }

      sideEl.addEventListener("change", () => {
        const side = sideEl.value;

        // Reset downstream
        relEl.value = "";
        detail1El.value = "";
        detail2El.value = "";
        guestEl.value = "";

        // Build relationships
        const relationships = buildRelationships(side);
        setOptions(
          relEl,
          relationships,
          side ? "เลือกความสัมพันธ์" : "กรุณาเลือกฝั่งก่อน"
        );
        relEl.disabled = !side;

        // Reset detail steps
        detail1Wrap.classList.toggle("hidden", true);
        detail2Wrap.classList.toggle("hidden", true);
        detail1El.disabled = true;
        detail2El.disabled = true;
        guestEl.disabled = true;
        setOptions(detail1El, [], "กรุณาเลือกความสัมพันธ์ก่อน");
        setOptions(detail2El, [], "กรุณาเลือกขยายความ 1 ก่อน");
        setOptions(guestEl, [], "กรุณาเลือกความสัมพันธ์ก่อน");

        searchBtn.disabled = true;
      });

      relEl.addEventListener("change", () => {
        const side = sideEl.value;
        const relationship = relEl.value;

        // Reset deeper fields
        detail1El.value = "";
        detail2El.value = "";
        guestEl.value = "";
        searchBtn.disabled = true;

        // Build detail1
        const d1 = buildDetail1(side, relationship);
        if (d1.length > 0) {
          setOptions(detail1El, d1, "เลือกขยายความ");
          detail1El.disabled = false;
          detail1Wrap.classList.remove("hidden");
        } else {
          // Hide detail1 and detail2 if not applicable
          detail1Wrap.classList.add("hidden");
          detail2Wrap.classList.add("hidden");
          detail1El.disabled = true;
          detail2El.disabled = true;

          // Build guests directly
          const guests = buildGuests(side, relationship, "", "");
          setOptions(
            guestEl,
            guests,
            relationship ? "เลือกชื่อ" : "กรุณาเลือกความสัมพันธ์ก่อน"
          );
          guestEl.disabled = guests.length === 0;
        }

        // Always reset detail2
        setOptions(detail2El, [], "กรุณาเลือกขยายความ 1 ก่อน");
      });

      detail1El.addEventListener("change", () => {
        const side = sideEl.value;
        const relationship = relEl.value;
        const detail1 = detail1El.value;

        // Reset deeper fields
        detail2El.value = "";
        guestEl.value = "";
        searchBtn.disabled = true;

        // Build detail2
        const d2 = buildDetail2(side, relationship, detail1);
        if (d2.length > 0) {
          setOptions(detail2El, d2, "เลือกขยายความ");
          detail2El.disabled = false;
          detail2Wrap.classList.remove("hidden");
        } else {
          detail2Wrap.classList.add("hidden");
          detail2El.disabled = true;

          // Build guests directly
          const guests = buildGuests(side, relationship, detail1, "");
          setOptions(
            guestEl,
            guests,
            detail1 ? "เลือกชื่อ" : "กรุณาเลือกความสัมพันธ์ก่อน"
          );
          guestEl.disabled = guests.length === 0;
        }
      });

      detail2El.addEventListener("change", () => {
        const side = sideEl.value;
        const relationship = relEl.value;
        const detail1 = detail1El.value;
        const detail2 = detail2El.value;

        // Build guests
        const guests = buildGuests(side, relationship, detail1, detail2);
        setOptions(
          guestEl,
          guests,
          detail2 ? "เลือกชื่อ" : "กรุณาเลือกขยายความ 1 ก่อน"
        );
        guestEl.disabled = guests.length === 0;
        searchBtn.disabled = true;
      });

      guestEl.addEventListener("change", () => {
        const hasAll = sideEl.value && guestEl.value;
        searchBtn.disabled = !hasAll;
      });

      searchBtn.addEventListener("click", () => {
        const side = sideEl.value;
        const name = guestEl.value;
        if (!side || !name) return;

        const match = guestData.find((g) => g.side === side && g.name === name);
        if (match) {
          resGuestCount.textContent = String(match.guestCount);
          resTableNumber.textContent = String(match.tableNumber);
          formView.classList.add("hidden");
          resultView.classList.remove("hidden");
        } else {
          // fallback if not found (shouldn't happen with the dropdown)
          alert("ไม่พบข้อมูลของคุณ กรุณาลองใหม่อีกครั้ง");
        }
      });

      resetBtn.addEventListener("click", () => {
        resetAll();
      });

      // First load
      resetAll();
    </script>
  </body>
</html>
